
<TABLE width="100%" cellspacing="0" cellpadding="4" CLASS="tableBorder">	
	<tr>
		<TD WIDTH="200" ALIGN="RIGHT"><b><%=tools_web.get_web_str('c_name')%>:</b></td>
		<TD STYLE="font-weight:normal"><%=curObject.name%></td>
	</tr>
	<tr>
		<td WIDTH="200" valign="top" align="right"><b><%=tools_web.get_web_str('c_desc')%>:</b></td>
		<td STYLE="font-weight:normal"><%=tools_web.get_web_desc( curObject.desc, UrlFromDocID( curObjectID ), 'contest.desc' )%></td>
	</tr>
<%
	if( curObject.start_date.HasValue && curObject.finish_date.HasValue )
    {
%>    
	<tr>
		<TD WIDTH="200" ALIGN="RIGHT"><b><%=tools_web.get_web_str('vcb_started')%>:</b></td>
		<TD STYLE="font-weight:normal"><%=curObject.start_date%>&nbsp;<%=tools_web.get_web_str('vppb_to')%>&nbsp;<%=curObject.finish_date%></td>
	</tr>
<%
    }
%> 
<%

	_xnum = ArrayOptFirstElem( XQuery( 'for $elem in participants where $elem/contest_id = ' + curObjectID + ' and $elem/person_id = ' + curUserID + ' and $elem/status_id != \'cancel\' return $elem' ) );
	if ( curObject.is_open && ( curObject.status_id == 'plan' || ( curObject.status_id == 'process' && curObject.online_vote )) && _xnum == undefined )
    {
%>
     <tr>
    	<TD WIDTH="200" ALIGN="RIGHT"><b><%=tools_web.get_web_str('vcb_open')%></b></td>
         <TD STYLE="font-weight:normal"><input type="button" value="<%=tools.get_web_str('c_participate')%>" onClick="document.location.href='view_doc.html?mode=participant_new&doc_id=<%=curDocID%>&object_id=<%=curObjectID%>';return false;" CLASS="inputButton" onMouseOver="this.className='inputButtonOver';" onMouseOut="this.className='inputButton';"></td>
   	</tr>
    
<%
	}
%>
</table>

<%
	if ( (_xnum != undefined)|| (_xnum == undefined && curObject.estimation_id == 'voting')|| ArrayOptFindByKey( curObject.judges, curUserID, 'collaborator_id' ) != undefined )
    {
    	if( curObject.show_works || curObject.judges.ChildByKeyExists( curUserID ) )
			_participants = XQuery( "for $elem in participants where $elem/contest_id = " + curObjectID + " and $elem/status_id!='cancel' return $elem" );
        else
        	_participants = XQuery( "for $elem in participants where $elem/contest_id = " + curObjectID + " and $elem/status_id!='cancel' and $elem/person_id=" + curUserID + " return $elem" );
//alert(ArrayCount(_participants))
		switch ( curObject.web_template_id )
		{	
			case 'gallery':
				Server.Execute( 'contest_gallery.html' );
				break;
				
			case 'preview':
				Server.Execute( 'contest_preview.html' );
				break;
				
			default:
				Server.Execute( 'contest_list.html' );
				break;
		}
	}
%>