<%
	_DAY_NUM2 = 10;
	try
	{
		if (_fully_opened)
			_fully_opened = true;
		else
			_fully_opened = false;
	}
	catch(_ne_otkrito_)
	{
		_fully_opened = false;
	}	
%>

<div id="NewPersons">
<table class="panelRightTable" width="100%" border="0" cellspacing="0" cellpadding="2">
<tr>
	<td class="tableVotingTop" colspan="2"><div class="VotingHeaderText"><%=tools.get_web_str('vpb_birthdays')%></div></td>
</tr>
<%
	personBArray = XQuery( "for $elem in collaborators where $elem/birth_date_rest_days_num != null() and $elem/birth_date_rest_days_num <= " + Int (_DAY_NUM2) + " return $elem" );
	personBArray = ArraySort(personBArray, 'birth_date_rest_days_num', '+');
    
	if (_fully_opened)
		_cutArray = personBArray;
	else
		_cutArray = ArrayRange(personBArray, 0 , Int (_UNDER_CUT2) );

   	for ( ListElem in _cutArray )
	{
	personBDoc = OpenDoc( UrlFromDocID( ListElem.PrimaryKey ) ).TopElem;
                _pbd = StrInt( Day( ListElem.birth_date ), 2)  +"."+ StrInt( Month( ListElem.birth_date ) , 2);

%>
<tr>
	<td rowspan="2" style="padding-left: 0px; padding-top: 4px; vertical-align: top" width="auto"><%
		if ( personBDoc.pict_url.HasValue )
		{
%>
		<img src="<%=personBDoc.pict_url%>" height="60" />
<%
		}
		else
			Response.Write("&nbsp;");
%>
</td>
	<td class="PersonName" style="padding-right: 5px;" width="100%"><A HREF="view_doc.html?mode=person&object_id=<%=ListElem.id%>&doc_id=<%=curDocID%>"><%=ListElem.fullname%></A></td>
</tr>
<tr>
	<td class="PersonName" align="center" style="padding-right: 5px;"><%=_pbd%></td>
</tr>
<%
	}
%>	
</table>
</div>