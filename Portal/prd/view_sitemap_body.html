<table width="100%"  border="0" cellspacing="0" cellpadding="3">
	<tr>
		<td width="50%" class="tableHeaderNoText"><img src="pics/1blank.gif" width="1" height="1" /></td>
	</tr>
<%
	var counter = 0;
	var _indent = '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
	
	function print_xml( _cur_doc, _cur_indent_str )
	{
		if ( counter == 50 )
			return;
			
		_class = counter++ % 2 ? 'tableRowEven' : 'tableRowOdd';

		if ( tools_web.check_access( _cur_doc, curUserID, curUser, Session ) != true )
			return;
					
		_child_doc_array = XQuery( "for $doc in documents where $doc/parent_document_id = " + _cur_doc.id + " order by $doc/position return $doc" );
%>
	<tr valign="top">
		<td class="<%=_class%>">
		
		<table width="100%"  border="0" cellspacing="0" cellpadding="0">
			<tr valign="top">
				<td class="<%=_class%>" nowrap="nowrap"><%=_cur_indent_str%></td>
				<td class="<%=_class%>" nowrap="nowrap">
<%
		if ( _cur_doc.is_link )
		{
%>
					<IMG src="pics/link.gif" width="12" height="11">
<%		
		}
		else if ( ArrayOptFirstElem( _child_doc_array ) != undefined )
		{
%>
					<IMG src="pics/dir.gif" width="12" height="11">
<%		
		}
		else
		{
%>
					<IMG src="pics/doc.gif" width="12" height="11">
<%		
		}
%>		
				</td>
				<td class="<%=_class%>" width="100%"><a href="<%=tools_web.put_query_string( _cur_doc.id, _cur_doc.template )%>"><%=_cur_doc.name%></a></td>
			</tr>
		</table>
		
		</td>
	</tr>
<%		
		put_doc_xml( _child_doc_array, _cur_indent_str + _indent );
	
	}

	
	function put_doc_xml( _doc_array, _indent_str )
	{
		var _doc;		
		for ( _doc in _doc_array )
		{
			print_xml( _doc, _indent_str );
		}
	}
	
	_menu_array = XQuery( alert("for $doc in document_menus where $doc/parent_document_id = " + ( curLng.main_document_id.HasValue ? curLng.main_document_id : 'null()' ) + " and $doc/is_main_item = true() order by $doc/position return $doc") )
	for ( _docum in _menu_array )	
	{
		print_xml( _docum, '' );
	}
%>

	<tr>
		<td class="tableFooter"><img src="pics/1blank.gif" width="1" height="1" /></td>
	</tr>
</TABLE>